;**************************************************
;Ò»¼ü¶à¹¦ÄÜÊ¶±ðµÄ³ÌÐò
;--------------------------------------------------
;lzhiy0816
;http://www.zy816.com
;http://www.zy816.com/lzhiy0816
;Copyright 2006 lzhiy0816's zy816
;All rights Reserved
;×÷Õß£ºÁºÖ¾Ó¢¢ 
;2006.04.21
;onepush.asm
;--------------------------------------------------
;¶ÌÊ±°´p3.2°´Å¥1´Î£¬µãÁÁp0.0µÆ
;Á¬Ðø°´p3.2°´Å¥2´Î£¬µãÁÁp0.0¡¢p0.1µÆ
;Á¬Ðø°´p3.2°´Å¥3´Î£¬µãÁÁp0.0¡¢p0.1¡¢p0.2µÆ
;Á¬Ðø°´p3.2°´Å¥4´Î£¬µãÁÁp0.0¡¢p0.1¡¢p0.2¡¢p0.3µÆ
;³¤Ê±°´p3.2°´Å¥1´Î£¬ÃðËùÓÐµÆ
;---------------------------------------------------------------------
; http://www.8951.com/bbs/dispbbs.asp?boardid=6&id=10056&star=1#61334
;**************************************************

          org 0000h
          sjmp main

          org 0030h
main:     mov p0,#0ffh             ;ÖÃ³õÖµ
          mov p3,#0ffh

lzy01:    jb p3.2,$                ;µÈ´ý°´Å¥°´ÏÂ
          acall delay_fd           ;·À¶¶ÑÓÊ±×Ó³ÌÐò
          jb p3.2,$-5
          mov r0,#250              ;\
dy1_1:    mov r1,#25               ;|->ÅÐ¶Ï°´Å¥ËÉ¿ªÊ±£¬ÊÇ·ñ³¬¹ýÑÓÊ±
dy1_2:    mov r2,#40               ;|  Ê±¼ä(1s)¡£Èç¹ûÑÓÊ±½áÊøÊ±£¬°´
dy1_3:    jb p3.2,lzy02            ;|  Å¥ÈÔÎ´ËÉ¿ª£¬Ôò°´Å¥ÎªÃðËùÓÐµÆ²Ù
          djnz r2,dy1_3            ;|  ×÷£»·ñÔò£¬°´Å¥Îª¼ÆÒ»´Î°´¶¯²Ù
          djnz r1,dy1_2            ;|  ×÷£¬²¢×ªµ½lzy02
          djnz r0,dy1_1            ;/
          mov p0,#0ffh             ;°´Å¥ËÉ¿ªÊ±¼ä³¬¹ý1s£¬ÃðËùÓÐµÆ
          jnb p3.2,$               ;µÈ´ý°´Å¥ËÉ¿ª
          nop
          nop
          sjmp lzy01

lzy02:    mov r0,#250              ;\
dy2_1:    mov r1,#25               ;|->ÔÚÑÓÊ±Ê±¼ä(1s)ÄÚ£¬ÅÐ¶ÏÊÇ·ñÔÙ
dy2_2:    mov r2,#20               ;|  ´Î°´ÏÂ°´Å¥£¬ÊÇÔò¼ÆµÚ2´Î°´¶¯²Ù
dy2_3:    jb p3.2,dy2_4            ;|  ×÷£¬²¢×ªµ½lzy03£»·ñÔòµãÁÁ1ÕµµÆ 
          acall delay_fd           ;|
          jnb p3.2,lzy03           ;|
dy2_4:    djnz r2,dy2_3            ;|
          djnz r1,dy2_2            ;|
          djnz r0,dy2_1            ;|
          mov p0,#0ffh             ;|
          clr p0.0                 ;/
          nop
          nop
          sjmp lzy01

lzy03:    jnb p3.2,$               ;µÈ´ý°´Å¥ËÉ¿ª
          mov r0,#250              ;\
dy3_1:    mov r1,#25               ;|->ÔÚÑÓÊ±Ê±¼ä(1s)ÄÚ£¬ÅÐ¶ÏÊÇ·ñÔÙ
dy3_2:    mov r2,#20               ;|  ´Î°´ÏÂ°´Å¥£¬ÊÇÔò¼ÆµÚ3´Î°´¶¯²Ù
dy3_3:    jb p3.2,dy3_4            ;|  ×÷£¬²¢×ªµ½lzy04£»·ñÔòµãÁÁ2ÕµµÆ 
          acall delay_fd           ;|
          jnb p3.2,lzy04           ;|
dy3_4:    djnz r2,dy3_3            ;|
          djnz r1,dy3_2            ;|
          djnz r0,dy3_1            ;|
          mov p0,#0ffh             ;|
          mov p0,#0fch             ;/
          nop
          nop
          sjmp lzy01

lzy04:    jnb p3.2,$               ;µÈ´ý°´Å¥ËÉ¿ª
          mov r0,#250              ;\
dy4_1:    mov r1,#25               ;|->ÔÚÑÓÊ±Ê±¼ä(1s)ÄÚ£¬ÅÐ¶ÏÊÇ·ñÔÙ
dy4_2:    mov r2,#20               ;|  ´Î°´ÏÂ°´Å¥£¬ÊÇÔò¼ÆµÚ4´Î°´¶¯²Ù
dy4_3:    jb p3.2,dy4_4            ;|  ×÷£¬²¢×ªµ½lzy05£»·ñÔòµãÁÁ3ÕµµÆ 
          acall delay_fd           ;|
          jnb p3.2,lzy05           ;|
dy4_4:    djnz r2,dy4_3            ;|
          djnz r1,dy4_2            ;|
          djnz r0,dy4_1            ;|
          mov p0,#0ffh             ;|
          mov p0,#0f8h             ;/
          nop
          nop
          ajmp lzy01

lzy05:    jnb p3.2,$               ;µÈ´ý°´Å¥ËÉ¿ª
          mov p0,#0ffh             ;ÏÈÇåp0¿Ú
          mov p0,#0f0h             ;È»ºóÔÙµãÁÁµã4ÕµµÆ
          nop
          nop
          ajmp lzy01


;------------------------------------------
;·À¶¶ÑÓÊ±×Ó³ÌÐò
;------------------------------------------
delay_fd: mov r4,#100
dey01:    mov r3,#100
          djnz r3,$
          djnz r4,dey01
          nop
          nop
          ret

	  nop
	  nop
	  end